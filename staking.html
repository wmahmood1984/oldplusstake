<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Old User Staking Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }
    
    .stake-card {
      transition: all 0.3s ease;
    }
    
    .stake-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 50px rgba(139, 92, 246, 0.5);
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .loading {
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes slideUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .slide-up {
      animation: slideUp 0.5s ease;
    }

    @keyframes priceChange {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .price-update {
      animation: priceChange 0.3s ease;
    }
    
    /* Mobile responsive improvements */
    @media (max-width: 640px) {
      .responsive-grid {
        grid-template-columns: 1fr !important;
      }
      
      .responsive-flex {
        flex-direction: column !important;
      }
      
      .responsive-text {
        font-size: 14px !important;
      }
      
      .responsive-padding {
        padding: 12px !important;
      }
    }
  </style>
</head>
<body class="h-full w-full m-0 p-0" style="background: linear-gradient(135deg, #f8fafc, #ddd6fe);">
  <div id="app" class="h-full w-full overflow-auto">
    <!-- Main Staking Page -->
    <div class="min-h-full w-full p-4 md:p-8">
      <div class="max-w-6xl mx-auto">
        
        <!-- Header -->
        <div class="mb-8 text-center">
          <h1 style="font-size: clamp(24px, 5vw, 32px); color: #0f172a; font-weight: 900; margin-bottom: 8px; text-shadow: 0 4px 20px #8b5cf6;">
            HEXA Staking Platform
          </h1>
          <p style="font-size: clamp(14px, 3vw, 16px); color: #0f172a; opacity: 0.8;">
            Stake HEXA tokens and earn rewards
          </p>
        </div>

        <!-- Today Stake Board with Live Price & Balance -->
        <div style="background: linear-gradient(135deg, #ffffff, rgba(6, 182, 212, 0.3)); padding: 16px; border-radius: 20px; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); border: 3px solid #06b6d4;">
          
          <div style="display: flex; align-items: stretch; justify-content: space-between; gap: 16px; flex-direction: column;">
            
            <!-- Live Price & Balance -->
            <div style="display: flex; justify-content: space-between; gap: 12px; flex-wrap: wrap;" class="responsive-flex">
              <div style="flex: 1; min-width: 140px;">
                <div style="font-size: 12px; color: #0f172a; opacity: 0.7; margin-bottom: 4px; font-weight: 600;">
                  üìä HEXA Live Price
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                  <div id="liveHexaPrice" style="font-size: clamp(18px, 4vw, 24px); color: #0f172a; font-weight: 900;">
                    $6500.00
                  </div>
                  <div id="priceChangeIndicator" style="font-size: clamp(16px, 3vw, 20px); font-weight: 900;">
                    ‚Üí
                  </div>
                </div>
              </div>
              
              <div style="flex: 1; min-width: 140px; text-align: right;">
                <div style="font-size: 12px; color: #0f172a; opacity: 0.7; margin-bottom: 4px; font-weight: 600;">
                  üíº wallet balance
                </div>
                <div id="walletBalanceDisplay" style="font-size: clamp(18px, 4vw, 24px); color: #8b5cf6; font-weight: 900;">
                  6000.00 HEXA
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- Stats Cards -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 12px; margin-bottom: 20px;" class="responsive-grid">
          <div style="background: #ffffff; padding: 16px; border-radius: 16px; box-shadow: 0 6px 20px rgba(0,0,0,0.1); border: 2px solid rgba(139, 92, 246, 0.4);">
            <div style="font-size: 12px; color: #0f172a; opacity: 0.7; margin-bottom: 8px; font-weight: 600;">
              üîí Total Staked
            </div>
            <div id="totalStakedDisplay" style="font-size: clamp(18px, 4vw, 24px); color: #8b5cf6; font-weight: 900;">
              0.00 HEXA
            </div>
          </div>

          <div style="background: #ffffff; padding: 16px; border-radius: 16px; box-shadow: 0 6px 20px rgba(0,0,0,0.1); border: 2px solid rgba(6, 182, 212, 0.4);">
            <div style="font-size: 12px; color: #0f172a; opacity: 0.7; margin-bottom: 8px; font-weight: 600;">
              üí∞ Total Earned
            </div>
            <div id="totalEarnedDisplay" style="font-size: clamp(18px, 4vw, 24px); color: #06b6d4; font-weight: 900;">
              0.00 HEXA
            </div>
          </div>

          <div style="background: #ffffff; padding: 16px; border-radius: 16px; box-shadow: 0 6px 20px rgba(0,0,0,0.1); border: 2px solid rgba(16, 185, 129, 0.4);">
            <div style="font-size: 12px; color: #0f172a; opacity: 0.7; margin-bottom: 8px; font-weight: 600;">
              üíµ Wallet Balance in (USDT)
            </div>
            <div id="walletBalanceUsdt" style="font-size: clamp(18px, 4vw, 24px); color: #10b981; font-weight: 900;">
              $39,000,000.00
            </div>
          </div>
        </div>

        <!-- Staking Tier -->
        <div style="background: #ffffff; padding: 16px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); margin-bottom: 16px;">
          <h2 style="font-size: clamp(18px, 4vw, 20px); color: #0f172a; font-weight: 900; text-align: center; margin-bottom: 16px;">
            üéØ NFT Staking
          </h2>

          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px; max-width: 600px; margin: 0 auto;">
            <div class="stake-card" style="background: linear-gradient(135deg, #f8fafc, rgba(139, 92, 246, 0.2)); padding: 20px; border-radius: 16px; border: 3px solid rgba(139, 92, 246, 0.4);">
              
              <div style="text-align: center; margin-bottom: 16px;">
                <div style="display: flex; justify-content: center; margin-bottom: 8px;">
                  <img width="200" src="image.png" alt="Hexa Coin" style="max-width: 100%; height: auto;">
                </div>

                <h3 style="font-size: clamp(16px, 3vw, 18px); color: #0f172a; font-weight: 900; margin-bottom: 6px;">
                  HEXA NFT Staking
                </h3>
                <div style="font-size: clamp(18px, 4vw, 24px); color: #8b5cf6; font-weight: 900; margin-bottom: 4px;">
                  Your Asset Value
                </div>
                <div style="font-size: clamp(18px, 4vw, 24px); color: #8b5cf6; font-weight: 900; margin-bottom: 4px;">
                  $10 (USDT)
                </div>
              </div>

              <div style="background: #ffffff; padding: 12px; border-radius: 12px; margin-bottom: 16px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                  <span style="font-size: 12px; color: #0f172a; opacity: 0.7;">Stake Amount:</span>
                  <span style="font-size: 14px; color: #0f172a; font-weight: 700;">3028 HEXA</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                  <span style="font-size: 12px; color: #0f172a; opacity: 0.7;">Duration:</span>
                  <span style="font-size: 14px; color: #0f172a; font-weight: 700;">200 Days</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                  <span style="font-size: 12px; color: #0f172a; opacity: 0.7;">Rewards:</span>
                  <span style="font-size: 14px; color: #10b981; font-weight: 700;">+4042 HEXA</span>
                </div>
              </div>

              <button id="stakeNowBtn" style="width: 100%; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 14px; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: 700; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);">
                Stake Now
              </button>
            </div>
          </div>
        </div>

        <!-- Staking History & Rewards Buttons -->
        <div style="text-align: center; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
          <button id="viewHistoryBtn" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 14px 24px; border-radius: 12px; cursor: pointer; font-size: clamp(14px, 3vw, 16px); font-weight: 700; box-shadow: 0 8px 20px rgba(139, 92, 246, 0.4); min-width: 180px;">
            View Staking History
          </button>
          <button id="viewRewardsBtn" style="background: linear-gradient(135deg, #06b6d4, #0891b2); color: white; border: none; padding: 14px 24px; border-radius: 12px; cursor: pointer; font-size: clamp(14px, 3vw, 16px); font-weight: 700; box-shadow: 0 8px 20px rgba(6, 182, 212, 0.4); min-width: 180px;">
            Staking Received
          </button>
        </div>

        <!-- Staking History (Hidden by default) -->
        <div id="stakingHistory" style="background: #ffffff; padding: 16px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); margin-top: 16px; display: none;">
          <h2 style="font-size: clamp(18px, 4vw, 20px); color: #0f172a; font-weight: 900; text-align: center; margin-bottom: 16px;">
            Your Staking History
          </h2>
          <div id="historyContent">
            <!-- Static Staking History -->
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <div style="background: #f8fafc; padding: 16px; border-radius: 12px; border-left: 4px solid #8b5cf6;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 32px;">üé®</span>
                    <div>
                      <div style="font-size: 16px; color: #0f172a; font-weight: 900;">
                        HEXA Staking
                      </div>
                      <div style="font-size: 12px; color: #0f172a; opacity: 0.7;">
                        200 Days
                      </div>
                    </div>
                  </div>
                  <div style="text-align: right; margin-top: 8px;">
                    <div style="font-size: 18px; color: #8b5cf6; font-weight: 900;">
                      3028 HEXA
                    </div>
                    <div style="font-size: 12px; color: #10b981; font-weight: 700;">
                      Active
                    </div>
                  </div>
                </div>
                <div style="background: rgba(139, 92, 246, 0.2); padding: 8px 12px; border-radius: 8px; margin-bottom: 8px;">
                  <div id="countdown-0" style="font-size: 12px; color: #8b5cf6; font-weight: 700; text-align: center;">
                    ‚è±Ô∏è 199d 23h 59m 45s remaining
                  </div>
                </div>
                <div style="font-size: 10px; color: #0f172a; opacity: 0.6;">
                  Staked on: 1/12/2024, 10:30:45 AM
                </div>
              </div>

              <div style="background: #f8fafc; padding: 16px; border-radius: 12px; border-left: 4px solid #8b5cf6;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 32px;">üé®</span>
                    <div>
                      <div style="font-size: 16px; color: #0f172a; font-weight: 900;">
                        HEXA Staking
                      </div>
                      <div style="font-size: 12px; color: #0f172a; opacity: 0.7;">
                        200 Days
                      </div>
                    </div>
                  </div>
                  <div style="text-align: right; margin-top: 8px;">
                    <div style="font-size: 18px; color: #8b5cf6; font-weight: 900;">
                      3028 HEXA
                    </div>
                    <div style="font-size: 12px; color: #10b981; font-weight: 700;">
                      Active
                    </div>
                  </div>
                </div>
                <div style="background: rgba(139, 92, 246, 0.2); padding: 8px 12px; border-radius: 8px; margin-bottom: 8px;">
                  <div id="countdown-1" style="font-size: 12px; color: #8b5cf6; font-weight: 700; text-align: center;">
                    ‚è±Ô∏è 150d 12h 30m 15s remaining
                  </div>
                </div>
                <div style="font-size: 10px; color: #0f172a; opacity: 0.6;">
                  Staked on: 11/15/2023, 2:45:22 PM
                </div>
              </div>

              <div style="background: #f8fafc; padding: 16px; border-radius: 12px; border-left: 4px solid #6b7280;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 32px;">üé®</span>
                    <div>
                      <div style="font-size: 16px; color: #0f172a; font-weight: 900;">
                        HEXA Staking
                      </div>
                      <div style="font-size: 12px; color: #0f172a; opacity: 0.7;">
                        200 Days
                      </div>
                    </div>
                  </div>
                  <div style="text-align: right; margin-top: 8px;">
                    <div style="font-size: 18px; color: #8b5cf6; font-weight: 900;">
                      3028 HEXA
                    </div>
                    <div style="font-size: 12px; color: #6b7280; font-weight: 700;">
                      Completed
                    </div>
                  </div>
                </div>
                <div style="font-size: 10px; color: #0f172a; opacity: 0.6;">
                  Staked on: 6/1/2023, 9:15:00 AM ‚Ä¢ Completed: 12/18/2023
                </div>
              </div>

              <div style="background: #f8fafc; padding: 16px; border-radius: 12px; border-left: 4px solid #6b7280;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 32px;">üé®</span>
                    <div>
                      <div style="font-size: 16px; color: #0f172a; font-weight: 900;">
                        HEXA Staking
                      </div>
                      <div style="font-size: 12px; color: #0f172a; opacity: 0.7;">
                        200 Days
                      </div>
                    </div>
                  </div>
                  <div style="text-align: right; margin-top: 8px;">
                    <div style="font-size: 18px; color: #8b5cf6; font-weight: 900;">
                      3028 HEXA
                    </div>
                    <div style="font-size: 12px; color: #6b7280; font-weight: 700;">
                      Completed
                    </div>
                  </div>
                </div>
                <div style="font-size: 10px; color: #0f172a; opacity: 0.6;">
                  Staked on: 3/10/2023, 4:20:10 PM ‚Ä¢ Completed: 9/26/2023
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Staking Rewards (Hidden by default) -->
        <div id="stakingRewards" style="background: #ffffff; padding: 16px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.4); margin-top: 16px; display: none;">
          <h2 style="font-size: clamp(18px, 4vw, 20px); color: #0f172a; font-weight: 900; text-align: center; margin-bottom: 16px;">
            üí∞ Staking Received History
          </h2>
          <div id="rewardsContent">
            <!-- Static Rewards History -->
            <div style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.2), rgba(6, 182, 212, 0.1)); padding: 16px; border-radius: 12px; margin-bottom: 16px; border: 2px solid rgba(6, 182, 212, 0.4);">
              <div style="text-align: center;">
                <div style="font-size: 14px; color: #0f172a; opacity: 0.7; margin-bottom: 8px; font-weight: 600;">
                  Total Projected Earnings
                </div>
                <div style="font-size: 32px; color: #06b6d4; font-weight: 900;">
                  16,168 HEXA
                </div>
                <div style="font-size: 12px; color: #0f172a; opacity: 0.6; margin-top: 4px;">
                  ‚âà $105,092,000 USDT
                </div>
              </div>
            </div>
            
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <div style="background: #f8fafc; padding: 16px; border-radius: 12px; border-left: 4px solid #06b6d4;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 32px;">üé®</span>
                    <div>
                      <div style="font-size: 16px; color: #0f172a; font-weight: 900;">
                        HEXA Staking
                      </div>
                      <div style="font-size: 12px; color: #0f172a; opacity: 0.7;">
                        3028 HEXA staked ‚Ä¢ 200 Days
                      </div>
                    </div>
                  </div>
                  <div style="text-align: right; margin-top: 8px;">
                    <div style="font-size: 18px; color: #06b6d4; font-weight: 900;">
                      +4042 HEXA
                    </div>
                    <div style="font-size: 12px; color: #10b981; font-weight: 700;">
                      Earning
                    </div>
                  </div>
                </div>
                <div style="font-size: 10px; color: #0f172a; opacity: 0.6;">
                  Started: 1/12/2024, 10:30:45 AM ‚Ä¢ Est. Completion: 7/30/2024
                </div>
              </div>

              <div style="background: #f8fafc; padding: 16px; border-radius: 12px; border-left: 4px solid #06b6d4;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 32px;">üé®</span>
                    <div>
                      <div style="font-size: 16px; color: #0f172a; font-weight: 900;">
                        HEXA Staking
                      </div>
                      <div style="font-size: 12px; color: #0f172a; opacity: 0.7;">
                        3028 HEXA staked ‚Ä¢ 200 Days
                      </div>
                    </div>
                  </div>
                  <div style="text-align: right; margin-top: 8px;">
                    <div style="font-size: 18px; color: #06b6d4; font-weight: 900;">
                      +4042 HEXA
                    </div>
                    <div style="font-size: 12px; color: #10b981; font-weight: 700;">
                      Earning
                    </div>
                  </div>
                </div>
                <div style="font-size: 10px; color: #0f172a; opacity: 0.6;">
                  Started: 11/15/2023, 2:45:22 PM ‚Ä¢ Est. Completion: 6/2/2024
                </div>
              </div>

              <div style="background: #f8fafc; padding: 16px; border-radius: 12px; border-left: 4px solid #06b6d4;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 32px;">üé®</span>
                    <div>
                      <div style="font-size: 16px; color: #0f172a; font-weight: 900;">
                        HEXA Staking
                      </div>
                      <div style="font-size: 12px; color: #0f172a; opacity: 0.7;">
                        3028 HEXA staked ‚Ä¢ 200 Days
                      </div>
                    </div>
                  </div>
                  <div style="text-align: right; margin-top: 8px;">
                    <div style="font-size: 18px; color: #06b6d4; font-weight: 900;">
                      +4042 HEXA
                    </div>
                    <div style="font-size: 12px; color: #6b7280; font-weight: 700;">
                      Completed
                    </div>
                  </div>
                </div>
                <div style="font-size: 10px; color: #0f172a; opacity: 0.6;">
                  Started: 6/1/2023, 9:15:00 AM ‚Ä¢ Received: 12/18/2023
                </div>
              </div>

              <div style="background: #f8fafc; padding: 16px; border-radius: 12px; border-left: 4px solid #06b6d4;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-wrap: wrap;">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 32px;">üé®</span>
                    <div>
                      <div style="font-size: 16px; color: #0f172a; font-weight: 900;">
                        HEXA Staking
                      </div>
                      <div style="font-size: 12px; color: #0f172a; opacity: 0.7;">
                        3028 HEXA staked ‚Ä¢ 200 Days
                      </div>
                    </div>
                  </div>
                  <div style="text-align: right; margin-top: 8px;">
                    <div style="font-size: 18px; color: #06b6d4; font-weight: 900;">
                      +4042 HEXA
                    </div>
                    <div style="font-size: 12px; color: #6b7280; font-weight: 700;">
                      Completed
                    </div>
                  </div>
                </div>
                <div style="font-size: 10px; color: #0f172a; opacity: 0.6;">
                  Started: 3/10/2023, 4:20:10 PM ‚Ä¢ Received: 9/26/2023
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Message Overlay (hidden by default) -->
  <div id="messageOverlay" style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: #3b82f6; color: white; padding: 12px 24px; border-radius: 12px; font-weight: bold; z-index: 9999; box-shadow: 0 10px 40px rgba(0,0,0,0.3); display: none; animation: slideUp 0.3s ease; max-width: 90vw; text-align: center;">
  </div>

  <script>
    // Staking Configuration
    const stakingTiers = [
      { id: 1, name: "HEXA", duration: "200 Days", minAmount: 3028, icon: "üé®", isNFT: true }
    ];

    // Game State
    let liveHexaPrice = 6500.00;
    let priceDirection = 'neutral';
    let countdownDays = 200;
    let countdownHours = 23;
    let countdownMinutes = 59;
    let countdownSeconds = 45;
    let userData = {
      wallet_balance: 6000,
      staked_amount: 6056, // 2 stakes of 3028 HEXA
      total_earned: 8084, // 2 stakes of 4042 HEXA
      stake_count: 8 // Remaining stakes (started with 10)
    };

    // DOM Elements
    const messageOverlay = document.getElementById('messageOverlay');

    // Initialize the staking platform
    function initStakingPlatform() {
      // Update displays with initial state
      updateAllDisplays();
      
      // Start countdown
      setInterval(updateCountdown, 1000);
      
      // Start price updates
      setInterval(updateHexaPrice, 3000);
      
      // Set up event listeners
      setupEventListeners();
    }

    // Update countdown every second
    function updateCountdown() {
      if (countdownSeconds > 0) {
        countdownSeconds--;
      } else if (countdownMinutes > 0) {
        countdownMinutes--;
        countdownSeconds = 59;
      } else if (countdownHours > 0) {
        countdownHours--;
        countdownMinutes = 59;
        countdownSeconds = 59;
      } else if (countdownDays > 0) {
        countdownDays--;
        countdownHours = 23;
        countdownMinutes = 59;
        countdownSeconds = 59;
      }

      // Update the first countdown display
      const countdownEl = document.getElementById('countdown-0');
      if (countdownEl) {
        countdownEl.textContent = `‚è±Ô∏è ${countdownDays}d ${countdownHours}h ${countdownMinutes}m ${countdownSeconds}s remaining`;
      }
    }

    // Format numbers with commas
    function formatNumber(num) {
      return Math.floor(num).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    // Update live HEXA price with fluctuation
    function updateHexaPrice() {
      const previousPrice = liveHexaPrice;
      const change = (Math.random() - 0.5) * 150;
      liveHexaPrice = Math.max(500, Math.min(13000, liveHexaPrice + change));
      
      if (liveHexaPrice > previousPrice) {
        priceDirection = 'up';
      } else if (liveHexaPrice < previousPrice) {
        priceDirection = 'down';
      } else {
        priceDirection = 'neutral';
      }

      updatePriceDisplay();
      updateAllDisplays();
    }

    // Update price display in UI
    function updatePriceDisplay() {
      const priceElement = document.getElementById('liveHexaPrice');
      const priceChangeElement = document.getElementById('priceChangeIndicator');
      
      if (priceElement) {
        priceElement.textContent = `$${liveHexaPrice.toFixed(2)}`;
        priceElement.classList.add('price-update');
        setTimeout(() => {
          priceElement.classList.remove('price-update');
        }, 300);

        if (priceDirection === 'up') {
          priceElement.style.color = '#10b981';
        } else if (priceDirection === 'down') {
          priceElement.style.color = '#ef4444';
        } else {
          priceElement.style.color = '#0f172a';
        }
      }

      if (priceChangeElement) {
        if (priceDirection === 'up') {
          priceChangeElement.textContent = '‚Üó';
          priceChangeElement.style.color = '#10b981';
        } else if (priceDirection === 'down') {
          priceChangeElement.textContent = '‚Üò';
          priceChangeElement.style.color = '#ef4444';
        } else {
          priceChangeElement.textContent = '‚Üí';
          priceChangeElement.style.color = '#0f172a';
        }
      }
    }

    // Update all displays
    function updateAllDisplays() {
      // Update wallet balance
      const walletBalance = document.getElementById('walletBalanceDisplay');
      if (walletBalance) {
        walletBalance.textContent = `${userData.wallet_balance.toFixed(2)} HEXA`;
      }

      // Update total staked
      const totalStaked = document.getElementById('totalStakedDisplay');
      if (totalStaked) {
        totalStaked.textContent = `${userData.staked_amount.toFixed(2)} HEXA`;
      }

      // Update total earned
      const totalEarned = document.getElementById('totalEarnedDisplay');
      if (totalEarned) {
        totalEarned.textContent = `${userData.total_earned.toFixed(2)} HEXA`;
      }

      // Update wallet balance in USDT
      const walletUsdt = document.getElementById('walletBalanceUsdt');
      if (walletUsdt) {
        const usdtValue = userData.wallet_balance * liveHexaPrice;
        walletUsdt.textContent = `$${formatNumber(usdtValue)}`;
      }

      // Update stake button state
      updateStakeButtonState();
    }

    // Update stake button state
    function updateStakeButtonState() {
      const stakeBtn = document.getElementById('stakeNowBtn');
      if (stakeBtn) {
        const canStake = userData.wallet_balance >= 3028 && userData.stake_count > 0;
        if (canStake) {
          stakeBtn.style.background = 'linear-gradient(135deg, #8b5cf6, #7c3aed)';
          stakeBtn.style.cursor = 'pointer';
          stakeBtn.style.opacity = '1';
          stakeBtn.textContent = 'Stake Now';
        } else {
          stakeBtn.style.background = 'rgba(15, 23, 42, 0.4)';
          stakeBtn.style.cursor = 'not-allowed';
          stakeBtn.style.opacity = '0.6';
          stakeBtn.textContent = 'Insufficient Balance';
        }
      }
    }

    // Show message
    function showMessage(text, type) {
      const bgColor = type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6';
      messageOverlay.style.background = bgColor;
      messageOverlay.textContent = text;
      messageOverlay.style.display = 'block';
      
      setTimeout(() => {
        messageOverlay.style.display = 'none';
      }, 3000);
    }

    // Execute staking
    function executeStake() {
      const tier = stakingTiers[0]; // HEXA tier
      const amount = tier.minAmount;
      
      if (userData.wallet_balance < amount) {
        showMessage("Insufficient balance!", "error");
        return;
      }

      if (userData.stake_count <= 0) {
        showMessage("No staking slots available today!", "error");
        return;
      }

      // Update user data
      userData.wallet_balance -= amount;
      userData.staked_amount += amount;
      userData.total_earned += 4042; // Add 4042 HEXA earnings
      userData.stake_count = Math.max(0, userData.stake_count - 1);

      // Show success message
      showMessage(`‚úÖ Successfully staked ${amount} HEXA in ${tier.name} tier!`, "success");
      
      // Update displays
      updateAllDisplays();
    }

    // Toggle staking history visibility
    function toggleHistory() {
      const historySection = document.getElementById('stakingHistory');
      const rewardsSection = document.getElementById('stakingRewards');
      const historyButton = document.getElementById('viewHistoryBtn');
      
      if (historySection && historyButton) {
        if (historySection.style.display === 'none') {
          historySection.style.display = 'block';
          historyButton.textContent = 'Hide Staking History';
          // Hide rewards section when showing history
          if (rewardsSection) {
            rewardsSection.style.display = 'none';
            const rewardsButton = document.getElementById('viewRewardsBtn');
            if (rewardsButton) rewardsButton.textContent = 'Staking Received';
          }
        } else {
          historySection.style.display = 'none';
          historyButton.textContent = 'View Staking History';
        }
      }
    }

    // Toggle staking rewards visibility
    function toggleRewards() {
      const rewardsSection = document.getElementById('stakingRewards');
      const historySection = document.getElementById('stakingHistory');
      const rewardsButton = document.getElementById('viewRewardsBtn');
      
      if (rewardsSection && rewardsButton) {
        if (rewardsSection.style.display === 'none') {
          rewardsSection.style.display = 'block';
          rewardsButton.textContent = 'Hide Received';
          // Hide history section when showing rewards
          if (historySection) {
            historySection.style.display = 'none';
            const historyButton = document.getElementById('viewHistoryBtn');
            if (historyButton) historyButton.textContent = 'View Staking History';
          }
        } else {
          rewardsSection.style.display = 'none';
          rewardsButton.textContent = 'Staking Received';
        }
      }
    }

    // Set up event listeners
    function setupEventListeners() {
      // Stake button
      document.getElementById('stakeNowBtn').addEventListener('click', function(e) {
        e.preventDefault();
        const canStake = userData.wallet_balance >= 3028 && userData.stake_count > 0;
        if (canStake) {
          executeStake();
        } else {
          showMessage("Cannot stake right now! Check your balance.", "error");
        }
      });

      // History button
      document.getElementById('viewHistoryBtn').addEventListener('click', toggleHistory);

      // Rewards button
      document.getElementById('viewRewardsBtn').addEventListener('click', toggleRewards);
    }

    // Initialize the staking platform when page loads
    window.addEventListener('DOMContentLoaded', initStakingPlatform);
  </script>
</body>
</html>